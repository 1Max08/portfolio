<?php

if (!isset($_SESSION)) session_start();
?>

<div class="change">
    <h2>Modifier la compétence</h2>

    <?php // Si un message d'erreur est fourni, l'afficher de façon sécurisée ?>
    <?php if (isset($error)): ?>
        <div class="error"><?= htmlspecialchars($error) ?></div>
    <?php endif; ?>

    <?php // Vérifie que l'objet $competence existe avant d'afficher le formulaire ?>
    <?php if ($competence): ?>
    <!-- Formulaire d'édition : envoi en POST vers la même route -->
    <form method="POST">
        <label>
            Nom:
            <!-- Valeur échappée pour éviter les XSS -->
            <input type="text" name="name" value="<?= htmlspecialchars($competence->name) ?>" required />
        </label>

        <label>
            Niveau:
            <!-- Niveau de la compétence, champ texte (peut être remplacé par select si nécessaire) -->
            <input type="text" name="level" value="<?= htmlspecialchars($competence->level) ?>" required />
        </label>

        <button type="submit">Sauvegarder</button>
        <a href="index.php?page=board">
            <button type="button">Retourner</button>
        </a>
    </form>
    <?php endif; ?>
</div>